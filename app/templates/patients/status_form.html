{% extends "base.html" %}
{% block content %}
<h1>Update Patient Status</h1>
<div class="patient-info">
  <h2>{{ patient.first_name }} {{ patient.last_name }}</h2>
  <p>NHS Number: {{ patient.nhs_number }}</p>
  <p>Current Status: <span class="status-badge status-{{ patient.status }}">{{ patient.status.title() }}</span></p>
  <p>Current Priority: <span class="priority-badge priority-{{ patient.priority }}">{{ patient.priority.title() }}</span></p>
</div>

<form method="post" novalidate class="status-form">
  {{ form.hidden_tag() }}
  
  <div class="form-section">
    <div class="form-group">
      {{ form.status.label(class="form-label") }}
      {{ form.status(class="form-select") }}
      <small class="form-help">Update the patient's current medical status</small>
    </div>
    
    <div class="form-group">
      {{ form.priority.label(class="form-label") }}
      {{ form.priority(class="form-select") }}
      <small class="form-help">Set the priority level for this patient</small>
    </div>
  </div>
  
  <div class="form-group">
    {{ form.medical_notes.label(class="form-label") }}
    {{ form.medical_notes(class="form-textarea", rows=6, placeholder="Add any relevant medical notes or status updates...") }}
    <small class="form-help">Optional medical notes about the status change</small>
  </div>
  
  <div class="form-actions">
    {{ form.submit(class="button primary") }}
    <a href="{{ url_for('patients.detail', id=patient.id) }}" class="button secondary">Cancel</a>
  </div>
</form>

<div class="status-info">
  <h3>Status Definitions</h3>
  <dl class="status-definitions">
    <dt class="status-active">Active</dt>
    <dd>Patient is currently receiving care and has active treatment plans</dd>
    
    <dt class="status-inactive">Inactive</dt>
    <dd>Patient is not currently receiving active treatment but remains in the system</dd>
    
    <dt class="status-discharged">Discharged</dt>
    <dd>Patient has been discharged from care and treatment is complete</dd>
    
    <dt class="status-deceased">Deceased</dt>
    <dd>Patient is deceased - this status is permanent and requires admin privileges</dd>
  </dl>
  
  <h3>Priority Levels</h3>
  <dl class="priority-definitions">
    <dt class="priority-urgent">Urgent</dt>
    <dd>Requires immediate attention and priority scheduling</dd>
    
    <dt class="priority-high">High</dt>
    <dd>Important case requiring expedited care</dd>
    
    <dt class="priority-normal">Normal</dt>
    <dd>Standard priority for routine care</dd>
    
    <dt class="priority-low">Low</dt>
    <dd>Non-urgent case that can be scheduled flexibly</dd>
  </dl>
</div>

{% endblock %}